(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{RMLy:function(e,t,i){"use strict";i.r(t),i.d(t,"ReviewsModule",function(){return U});var r=i("SVse"),n=i("iInd"),c=i("lJxs"),o=i("8Y7J"),b=i("N/25");let s=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.isLogged().pipe(Object(c.a)(e=>e||this.router.createUrlTree(["/auth/login"])))}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(b.a),o.Nb(n.c))},e.\u0275prov=o.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var a=i("IheW");let u=(()=>{class e{constructor(e){this.http=e}getReviews(){return this.http.get("reviews").pipe(Object(c.a)(e=>e.data))}getReview(e){return this.http.get("reviews/"+e).pipe(Object(c.a)(e=>e.data))}addReview(e){return this.http.post("reviews",e).pipe(Object(c.a)(e=>e.data))}editReview(e){return this.http.put("reviews/"+e.id,e).pipe(Object(c.a)(e=>e.data))}delete(e){return this.http.delete("reviews/"+e)}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(a.b))},e.\u0275prov=o.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=i("AytR");let d=(()=>{class e{transform(e){if(e){const t=l.a.baseUrl.toLowerCase(),i=e.toLowerCase();return i.includes(t)?i:`${t}/images/${i}`}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Fb({name:"imgUrl",type:e,pure:!0}),e})();const v=function(e){return["/reviews/edit",e]};function w(e,t){if(1&e){const e=o.Kb();o.Jb(0,"div",6),o.Jb(1,"div",14),o.Jb(2,"a",15),o.ec(3,"Edit"),o.Ib(),o.Jb(4,"button",16),o.Qb("click",function(){return o.ac(e),o.Sb(2).deleteReview()}),o.ec(5,"Delete"),o.Ib(),o.Ib(),o.Ib()}if(2&e){const e=o.Sb(2);o.wb(2),o.Vb("routerLink",o.Xb(1,v,e.review.id))}}function g(e,t){if(1&e&&(o.Jb(0,"div",1),o.Jb(1,"div",2),o.Hb(2,"img",3),o.Tb(3,"imgUrl"),o.Ib(),o.Jb(4,"div",4),o.Jb(5,"div",1),o.Jb(6,"div",5),o.Jb(7,"h1"),o.ec(8),o.Ib(),o.Ib(),o.Jb(9,"div",6),o.Jb(10,"p"),o.ec(11),o.Ib(),o.Ib(),o.Jb(12,"div",7),o.Jb(13,"p",8),o.ec(14),o.Ib(),o.Ib(),o.Jb(15,"div",9),o.Jb(16,"p",10),o.ec(17),o.Ib(),o.Ib(),o.Ib(),o.Ib(),o.Jb(18,"div",11),o.Jb(19,"div",1),o.Jb(20,"div",6),o.Jb(21,"h3"),o.ec(22,"Description"),o.Ib(),o.Ib(),o.Jb(23,"div",12),o.Jb(24,"p"),o.ec(25),o.Ib(),o.Ib(),o.Jb(26,"div",6),o.Jb(27,"h3"),o.ec(28,"Category"),o.Ib(),o.Ib(),o.Jb(29,"div",6),o.Jb(30,"p"),o.ec(31),o.Ib(),o.Ib(),o.Jb(32,"div",6),o.Jb(33,"h3"),o.ec(34,"Country"),o.Ib(),o.Ib(),o.Jb(35,"div",6),o.Jb(36,"p"),o.ec(37),o.Ib(),o.Ib(),o.dc(38,w,6,3,"div",13),o.Ib(),o.Ib(),o.Ib()),2&e){const e=o.Sb();o.wb(2),o.Vb("src",o.Ub(3,10,e.review.image),o.bc),o.wb(6),o.fc(e.review.title),o.wb(3),o.fc(e.review.content),o.wb(3),o.hc("",null==e.review.author?null:e.review.author.firstName," ",null==e.review.author?null:e.review.author.lastName,""),o.wb(3),o.fc(e.review.date),o.wb(8),o.fc(e.review.description),o.wb(6),o.fc(e.review.category.name),o.wb(6),o.fc(e.review.country.name),o.wb(1),o.Vb("ngIf",(null==e.review.author?null:e.review.author.email)==e.currentUserName)}}let p=(()=>{class e{constructor(e,t,i){this.reviewsService=e,this.route=t,this.router=i,this.currentUserName=""}ngOnInit(){const e=this.route.snapshot.params.id;e&&this.reviewsService.getReview(e).subscribe(e=>{this.review=e,this.tokenInfo()})}deleteReview(){this.reviewsService.delete(this.review.id).subscribe(e=>this.router.navigate(["reviews"]))}tokenInfo(){const e=localStorage.getItem("token");e&&(this.currentUserName=JSON.parse(atob(e.split(".")[1])).username)}}return e.\u0275fac=function(t){return new(t||e)(o.Gb(u),o.Gb(n.a),o.Gb(n.c))},e.\u0275cmp=o.Ab({type:e,selectors:[["app-review-details"]],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12","mb-3"],["alt","",1,"w-100",3,"src"],[1,"col-6"],[1,"col-12","border-bottom","mb-2","text-center"],[1,"col-12"],[1,"col-3"],[1,"text-muted"],[1,"col-3","offset-6"],[1,"text-muted","text-right"],[1,"col-4","offset-2"],[1,"col-12","mb-2","border-bottom"],["class","col-12",4,"ngIf"],["role","group",1,"btn-group"],[1,"btn","btn-primary",3,"routerLink"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&o.dc(0,g,39,12,"div",0),2&e&&o.Vb("ngIf",t.review)},directives:[r.i,n.e],pipes:[d],styles:[""]}),e})(),f=(()=>{class e{constructor(e){this.http=e}getCategories(){return this.http.get("categories").pipe(Object(c.a)(e=>e.data))}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(a.b))},e.\u0275prov=o.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),h=(()=>{class e{constructor(e){this.http=e}getCountries(){return this.http.get("countries").pipe(Object(c.a)(e=>e.data))}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(a.b))},e.\u0275prov=o.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=i("s7LF");function I(e,t){if(1&e&&(o.Jb(0,"option",20),o.ec(1),o.Ib()),2&e){const e=t.$implicit;o.Vb("value",e.id),o.wb(1),o.fc(e.name)}}function J(e,t){if(1&e&&(o.Jb(0,"option",20),o.ec(1),o.Ib()),2&e){const e=t.$implicit;o.Vb("value",e.id),o.wb(1),o.fc(e.name)}}function y(e,t){if(1&e&&(o.Hb(0,"img",21),o.Tb(1,"imgUrl")),2&e){const e=o.Sb();o.Vb("src",o.Ub(1,1,e.review.image),o.bc)}}function C(e,t){if(1&e&&o.Hb(0,"img",21),2&e){const e=o.Sb();o.Vb("src",e.review.image,o.bc)}}let S=(()=>{class e{constructor(e,t,i,r,n){this.route=e,this.reviewsService=t,this.categoriesService=i,this.countriesService=r,this.router=n,this.imageChanged=!1,this.isNew=!0,this.categories=[],this.countries=[],this.review={title:"",description:"",image:"",content:"",category:0,country:0}}ngOnInit(){const e=this.route.snapshot.params.id;e&&(this.isNew=!1,this.loadReview(e)),this.loadData()}loadReview(e){this.reviewsService.getReview(e).subscribe(e=>this.review=Object.assign(Object.assign({},e),{category:e.category.id,country:e.country.id}))}loadData(){this.countriesService.getCountries().subscribe(e=>this.countries=e),this.categoriesService.getCategories().subscribe(e=>this.categories=e)}loadImage(e){if(!e.files||0===e.files.length)return;const t=new FileReader;t.readAsDataURL(e.files[0]),t.addEventListener("loadend",e=>{this.review.image=t.result,this.imageChanged=!0})}submit(){this.imageChanged||(this.review.image=void 0),this.isNew?this.reviewsService.addReview(this.review).subscribe(e=>this.router.navigate(["/reviews",e.id])):this.reviewsService.editReview(this.review).subscribe(e=>this.router.navigate(["/reviews",e.id]))}}return e.\u0275fac=function(t){return new(t||e)(o.Gb(n.a),o.Gb(u),o.Gb(f),o.Gb(h),o.Gb(n.c))},e.\u0275cmp=o.Ab({type:e,selectors:[["app-review-form"]],decls:36,vars:10,consts:[[3,"submit"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder","Title","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","description","rows","2","name","description",1,"form-control",3,"ngModel","ngModelChange"],["for","content"],["id","content","rows","5","name","content",1,"form-control",3,"ngModel","ngModelChange"],["for","category"],["id","category","name","category",1,"form-control",3,"ngModel","ngModelChange"],["value","0","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","country"],["id","country","name","country",1,"form-control",3,"ngModel","ngModelChange"],[1,"custom-file"],["type","file","id","file",1,"custom-file-input","mb-3",3,"change"],["fileInput",""],["for","file",1,"custom-file-label"],["alt","","class","my-2 w-100",3,"src",4,"ngIf"],["type","submit",1,"mt-3","btn","btn-primary"],[3,"value"],["alt","",1,"my-2","w-100",3,"src"]],template:function(e,t){if(1&e){const e=o.Kb();o.Jb(0,"form",0),o.Qb("submit",function(){return t.submit()}),o.Jb(1,"legend"),o.ec(2),o.Ib(),o.Jb(3,"div",1),o.Jb(4,"label",2),o.ec(5,"Title"),o.Ib(),o.Jb(6,"input",3),o.Qb("ngModelChange",function(e){return t.review.title=e}),o.Ib(),o.Ib(),o.Jb(7,"div",1),o.Jb(8,"label",4),o.ec(9,"Description"),o.Ib(),o.Jb(10,"textarea",5),o.Qb("ngModelChange",function(e){return t.review.description=e}),o.Ib(),o.Ib(),o.Jb(11,"div",1),o.Jb(12,"label",6),o.ec(13,"Content"),o.Ib(),o.Jb(14,"textarea",7),o.Qb("ngModelChange",function(e){return t.review.content=e}),o.Ib(),o.Ib(),o.Jb(15,"div",1),o.Jb(16,"label",8),o.ec(17,"Category"),o.Ib(),o.Jb(18,"select",9),o.Qb("ngModelChange",function(e){return t.review.category=e}),o.Jb(19,"option",10),o.ec(20,"Choose one"),o.Ib(),o.dc(21,I,2,2,"option",11),o.Ib(),o.Ib(),o.Jb(22,"div",1),o.Jb(23,"label",12),o.ec(24,"Country"),o.Ib(),o.Jb(25,"select",13),o.Qb("ngModelChange",function(e){return t.review.country=e}),o.dc(26,J,2,2,"option",11),o.Ib(),o.Ib(),o.Jb(27,"div",14),o.Jb(28,"input",15,16),o.Qb("change",function(){o.ac(e);const i=o.Zb(29);return t.loadImage(i)}),o.Ib(),o.Jb(30,"label",17),o.ec(31,"Choose file"),o.Ib(),o.Ib(),o.dc(32,y,2,3,"img",18),o.dc(33,C,1,1,"img",18),o.Jb(34,"button",19),o.ec(35,"Submit"),o.Ib(),o.Ib()}2&e&&(o.wb(2),o.fc(t.isNew?"Create a new review":"Edit a review"),o.wb(4),o.Vb("ngModel",t.review.title),o.wb(4),o.Vb("ngModel",t.review.description),o.wb(4),o.Vb("ngModel",t.review.content),o.wb(4),o.Vb("ngModel",t.review.category),o.wb(3),o.Vb("ngForOf",t.categories),o.wb(4),o.Vb("ngModel",t.review.country),o.wb(1),o.Vb("ngForOf",t.countries),o.wb(6),o.Vb("ngIf",t.review.image&&!t.imageChanged),o.wb(1),o.Vb("ngIf",t.review.image&&t.imageChanged))},directives:[m.j,m.d,m.e,m.a,m.c,m.f,m.h,m.g,m.i,r.h,r.i],pipes:[d],styles:[""]}),e})();const V=function(e){return["/reviews",e]};let M=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ab({type:e,selectors:[["app-review-card"]],inputs:{review:"review"},decls:11,vars:11,consts:[[1,"card"],[3,"routerLink"],["alt","",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){1&e&&(o.Jb(0,"div",0),o.Jb(1,"a",1),o.Hb(2,"img",2),o.Tb(3,"imgUrl"),o.Ib(),o.Jb(4,"div",3),o.Jb(5,"h5",4),o.ec(6),o.Ib(),o.Jb(7,"p",5),o.ec(8),o.Ib(),o.Jb(9,"a",6),o.ec(10,"Details"),o.Ib(),o.Ib(),o.Ib()),2&e&&(o.wb(1),o.Vb("routerLink",o.Xb(7,V,t.review.id)),o.wb(1),o.Vb("src",o.Ub(3,5,t.review.image),o.bc),o.wb(4),o.fc(t.review.title),o.wb(2),o.gc(" ",t.review.description," "),o.wb(1),o.Vb("routerLink",o.Xb(9,V,t.review.id)))},directives:[n.e],pipes:[d],styles:[""]}),e})();function O(e,t){1&e&&o.Hb(0,"app-review-card",2),2&e&&o.Vb("review",t.$implicit)}const k=[{path:"edit/:id",component:S,canActivate:[s]},{path:"add",component:S,canActivate:[s]},{path:":id",component:p,canActivate:[s]},{path:"",component:(()=>{class e{constructor(e){this.reviewsService=e,this.reviews=[]}ngOnInit(){this.reviewsService.getReviews().subscribe(e=>this.reviews=e)}}return e.\u0275fac=function(t){return new(t||e)(o.Gb(u))},e.\u0275cmp=o.Ab({type:e,selectors:[["app-reviews-page"]],decls:2,vars:1,consts:[[1,"card-deck"],[3,"review",4,"ngFor","ngForOf"],[3,"review"]],template:function(e,t){1&e&&(o.Jb(0,"div",0),o.dc(1,O,1,1,"app-review-card",1),o.Ib()),2&e&&(o.wb(1),o.Vb("ngForOf",t.reviews))},directives:[r.h,M],styles:[""]}),e})(),canActivate:[s]}];let R=(()=>{class e{}return e.\u0275mod=o.Eb({type:e}),e.\u0275inj=o.Db({factory:function(t){return new(t||e)},imports:[[n.f.forChild(k)],n.f]}),e})();var N=i("iTUp");let U=(()=>{class e{}return e.\u0275mod=o.Eb({type:e}),e.\u0275inj=o.Db({factory:function(t){return new(t||e)},imports:[[r.b,R,N.a,m.b]]}),e})()}}]);